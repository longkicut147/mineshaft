    def round(self):
        while len(self.player_alive) > 1:
            self.player_alive = [player for player in self.player_alive if player.alive]
            for _ in range(len(self.player_alive)):
                # đến lượt người chơi hiện tại
                current_player = self.player_alive[self.current]
                other_player = [player for player in self.player_alive if player != current_player]
                # khi đến lượt thì cộng 1 vàng
                current_player.gold += 1
                chat_log.append(f"den luot {current_player.name}:")
                
                # bước 1: chọn hành động
                choices = [self.skip, self.miner, self.swordman, self.thief, self.disguise,
                            self.swap, self.discard, self.gun, self.heal, self.buy]
                chat_log.append(f"chon hanh dong muon lam: ")
                # Wait for player input with a 10-second timeout
                start_time = time.time()
                while True:
                    if len(current_player.input) > 0:
                        choice = current_player.input[-1]  # Get the player's last input
                        break
                    elif time.time() - start_time > 10:  # If 10 seconds have passed
                        choice = "skip"  # Default to skip
                        break
                    time.sleep(0.1)  # Sleep for a short period to prevent busy waiting

                # After 10s, either the player's input or 'skip' will be chosen
                if choice == "skip":
                    choice = self.skip
                else:
                    for i in choices:
                        if choice == i.__name__():
                            choice = i
                            break
                    else:
                        choice = self.skip



                # bước 2: chọn đối tượng (nếu cần)
                if choice == self.swordman or choice == self.thief or choice == self.swap or choice == self.discard:
                    opponent_choices = other_player
                    chat_log.append(f"chon doi tuong muon {choice.__name__()}")
                    opponent = current_player.input[-1]
                    for i in opponent_choices:
                        if opponent == i.name:
                            opponent = i
                else:
                    opponent = None

                # bước 3: kiểm tra nói dối (cho các hành động của character card)
                if choice == self.swordman or choice == self.thief or choice == self.miner:
                    for player in range(len(other_player)):
                        chat_log.append(f"co tin {current_player} khong: ")
                        k = player.input[-1]
                        if k=="khong tin":
                            if choice != current_player.ch_cards[0].name:
                                # nếu nói dối, người đó trừ 4 máu và không được thực hiện hành động
                                current_player.take_damage(4)
                                return
                            else:
                                # nếu nói thật, người kiểm tra trừ 4 máu
                                other_player[player].take_damage(4)
                                # và được thực hiện hành động
                                if opponent:
                                    choice(opponent)
                                else:
                                    choice()
                                    return
                        elif k=="tin":
                            pass
                    choice()
                else:
                    pass

                # tăng "hiện tại" lên 1 -> "tiếp theo"
                self.current = (self.current + 1) % len(self.player_alive)